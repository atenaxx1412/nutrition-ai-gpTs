# 栄養管理師AI - プロジェクトコンセプト

## 🎯 プロジェクト概要

GPTs + REST API による個人・家族向けパーソナル栄養コーチAIシステムの構築

## 📋 システム要件

### GPTs側機能
- **認証システム**: 初回パスワード入力による会話開始制御
- **食事分析**: 写真・テキストによる食事内容の栄養士観点からの分析
- **パーソナライズアドバイス**: 蓄積データに基づく長期的な栄養指導
- **目標設定・管理**: 個人の健康目標に基づく食事プラン提案
- **クライアント切り替え**: 複数ユーザー（家族等）の管理

### REST API側機能
- **食事画像解析**: Google Vision API による食材識別
- **栄養計算**: 栄養データベースAPIとの連携
- **データ蓄積**: Firestore による食事履歴・進捗管理
- **ユーザー管理**: Firebase Auth による多クライアント対応
- **分析・レポート**: 長期的な栄養バランス分析

## 🛠️ 技術スタック

### フロントエンド
- **GPTs**: OpenAI Custom GPTs
- **Actions**: REST API連携

### バックエンド
- **Platform**: Vercel (Node.js)
- **Framework**: Next.js API Routes
- **Database**: Firebase Firestore
- **Authentication**: Firebase Auth
- **Storage**: Firebase Storage (食事画像)

### AI・分析
- **食材識別**: Google Vision API (月1,000リクエスト無料)
- **栄養計算**: Nutrition API (Spoonacular等)
- **会話AI**: GPTs内蔵機能

## 🏗️ システム構成図

```
[GPTs] ←→ [Vercel API] ←→ [Firebase]
  ↓           ↓              ↓
パスワード   Google Vision   Firestore
認証        API連携         データ蓄積
アドバイス   栄養計算        ユーザー管理
```

## 📱 主要機能フロー

### 1. 認証フロー
```
1. GPTs起動
2. パスワード入力要求
3. API認証チェック
4. 認証成功 → 会話開始
   認証失敗 → アクセス拒否
```

### 2. 食事分析フロー
```
1. 食事画像/テキスト入力
2. Google Vision API → 食材識別
3. Nutrition API → 栄養計算
4. Firestore → データ保存
5. GPTs → 栄養士観点のアドバイス
```

### 3. 長期分析フロー
```
1. 蓄積データ取得
2. 栄養バランス分析
3. トレンド・パターン識別
4. 個別化された改善提案
5. 目標達成度評価
```

## 🎨 ユーザーエクスペリエンス

### 初回利用
1. パスワード入力でアクセス
2. 基本情報設定（年齢、性別、目標等）
3. 最初の食事登録
4. パーソナライズ設定完了

### 日常利用
1. 食事写真撮影・アップロード
2. 即座に栄養分析結果表示
3. その場でのアドバイス受信
4. 週次・月次レポート確認

### 家族利用
1. クライアント切り替え機能
2. 家族全体の栄養バランス把握
3. 個人別・家族別アドバイス
4. 買い物リスト自動生成

## 📊 データ管理

### Firestore コレクション構成
```
/users/{userId}
  - profile: 基本情報・目標
  - meals: 食事記録
  - progress: 進捗データ
  - goals: 目標設定

/families/{familyId}
  - members: 家族メンバー
  - shared_goals: 共通目標
  - meal_plans: 家族向けプラン
```

### API エンドポイント設計
```
POST /api/auth/validate - パスワード認証
POST /api/meals/analyze - 食事分析
GET /api/users/{id}/dashboard - ダッシュボード
POST /api/goals/set - 目標設定
GET /api/reports/weekly - 週次レポート
```

## 🚀 開発ロードマップ

### Phase 1: MVP (4週間)
- [ ] 基本認証システム
- [ ] 食事画像解析機能
- [ ] シンプルなアドバイス機能
- [ ] Firestore基本データ構造

### Phase 2: 拡張 (6週間)
- [ ] 長期データ分析
- [ ] 目標設定・進捗管理
- [ ] レポート機能
- [ ] 複数クライアント対応

### Phase 3: 最適化 (4週間)
- [ ] パフォーマンス改善
- [ ] UI/UX向上
- [ ] 高度な分析機能
- [ ] 家族向け機能拡張

## 💰 コスト試算

### 開発コスト
- **Google Vision API**: 月1,000リクエスト無料
- **Firebase**: Spark Plan (無料枠）
- **Vercel**: Hobby Plan (無料)
- **Nutrition API**: 基本プラン $10-20/月

### 運用コスト
- 月間利用100回想定: $0-5/月
- データストレージ: ~1GB $0.10/月
- 総計: $10-25/月

## 🔒 セキュリティ・プライバシー

### データ保護
- Firebase Security Rules適用
- 画像データの暗号化保存
- 個人情報の匿名化オプション

### アクセス制御
- パスワード認証による初期アクセス制限
- Firebase Auth による多層認証
- API Rate Limiting実装

## 📈 成功指標

### 技術指標
- API応答時間: 2秒以内
- 食材識別精度: 80%以上
- システム稼働率: 99%以上

### ユーザー指標
- 継続利用率: 70%以上（月次）
- アドバイス満足度: 4.0/5.0以上
- 目標達成率: 60%以上

---

**作成日**: 2025-08-02  
**更新日**: 2025-08-02  
**バージョン**: v1.0